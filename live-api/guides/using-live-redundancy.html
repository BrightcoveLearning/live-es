---
title: 'Uso de redundancia en vivo'
description: 'Los grupos redundantes le permiten combinar 2 o más trabajos en vivo en una sola transmisión con conmutación por error automática para una reproducción confiable ininterrumpida. Esta guía le guiará a través de la creación de un grupo redundante, la adición de trabajos y el forzamiento de una conmutación por error mediante Live API.'
parent: Guides 
grandparent: Live API
---
 <h1>Esta página se ha movido; se te dirigirá a la <a href="https://apis.support.brightcove.com/live-api/guides/using-live-redundancy.html">nueva ubicación</a> en 3 segundos. ¡Actualiza tus marcadores!</h1>
<script type="text/javascript">
var t = setTimeout (function () { window.location.href = 'https://apis.support.brightcove.com/live-api/guides/using-live-redundancy.html'; }, 3000);
</script>
<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">Introducción</h2>
    
    <p>La función de redundancia de Brightcove Live ayuda a asegurar un rendimiento confiable para sus eventos en vivo mediante la creación de una transmisión de respaldo a la que Live realizará una conmutación por error automáticamente en caso de que la primera transmisión deje de funcionar.</p>
    
    <p>Tenga en cuenta que todas las solicitudes a la API en vivo requieren los siguientes encabezados:</p>
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">Encabezados de solicitud de API</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>Clave</th>
          <th>Valor</th>
          <th>Notas</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">X-API-KEY</code></td>
          <td>{your API Key}</td>
          <td>Su clave debería haber sido proporcionada cuando abrió su cuenta Brightcove Live</td>
        </tr>
        <tr>
          <td><code translate="No">Content-Type</code></td>
          <td>aplicación / json</td>
          <td>Técnicamente, el <code translate="No">content-type</code> El encabezado solo es necesario para las solicitudes de escritura que incluyen un cuerpo de solicitud, pero no debería dañar las solicitudes de lectura.</td>
        </tr>
      </tbody>
    </table>
    </section>
    
    <section class="bcls-section">
    <h2 id="Create_your_Live_jobs">Crea tus trabajos en vivo</h2>
    
    <p>Para la configuración redundante, deberá crear 2 o más Brightcove Live Jobs. El único requisito de los trabajos es que se creen con el <strong>mismo</strong> <code translate="No">output</code> ajustes. La forma más sencilla de lograrlo es crear un trabajo con las especificaciones de salida que desee y luego utilizar el <code translate="No">copy_outputs_from_job</code> parámetro para crear los trabajos adicionales.</p>
    
    <p>No hay restricciones sobre las regiones en las que se pueden crear estos puestos de trabajo, sin embargo, se recomienda que estén ubicados relativamente cerca unos de otros.</p>
    
    <p>Una vez que se hayan creado los trabajos en vivo, conserve las ID de trabajo para más adelante. El cuerpo de la solicitud que utilizará para agregar estos trabajos a un grupo redundante (consulte las secciones a continuación) se verá así:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">[
      {
        "job_id": "0b76bc73f92f46dc917bbe5061c0c633"
      },
      {
        "job_id": "0ae5a4a71dc54b3181af0f98ee407c27"
      }
    ]</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Create_the_redundant_group">Crea el grupo redundante</h2>
    
    <p>Para crear un grupo redundante, deberá enviar un <code translate="No">POST</code> solicitud de:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups</code></pre>
    
    <p>Aquí hay un cuerpo de solicitud de muestra:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "ad_insertion": true,
      "processing_regions": ["us-west-2"],
      "storage_regions": ["us-west-2", "us-east-1"],
      "label": "Test RG",
      "live_dvr_sliding_window_duration": 1800
    }</code></pre>
    
    <p>La siguiente tabla contiene una lista completa de campos para el cuerpo de la solicitud. En varios casos, son idénticos a los campos utilizados para crear un trabajo en vivo. Ver el <a href="/live-api/references/reference.html">Referencia de API en vivo</a> para obtener más detalles sobre los campos.</p>
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">Crear campos de grupo redundantes</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>Campo</th>
          <th>Tipo</th>
          <th>¿Requerido?</th>
          <th>Descripción</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">ad_insertion</code></td>
          <td>booleano</td>
          <td>opcional</td>
          <td>Establézcalo en verdadero si esta transmisión debe estar habilitada para SSAI</td>
        </tr>
        <tr>
          <td><code translate="No">add_cdns</code></td>
          <td>formación</td>
          <td>opcional</td>
          <td>Matriz de proveedores de CDN adicionales que se utilizarán para la generación de manifiestos. Para cada CDN proporcionado, el manifiesto se antepondrá en consecuencia</td>
        </tr>
        <tr>
          <td><code translate="No">drm</code></td>
          <td>objeto</td>
          <td>opcional</td>
          <td>Aún no es compatible</td>
        </tr>
        <tr>
          <td><code translate="No">encryption</code></td>
          <td>objeto</td>
          <td>opcional</td>
          <td>Aún no es compatible</td>
        </tr>
        <tr>
          <td><code translate="No">label</code></td>
          <td>cuerda</td>
          <td>requerido</td>
          <td>Una etiqueta para identificar al grupo</td>
        </tr>
        <tr>
          <td><code translate="No">live_dvr_sliding_window_duration</code></td>
          <td>entero</td>
          <td>opcional</td>
          <td></td>
        </tr>
        <tr>
          <td><code translate="No">notifications</code></td>
          <td>formación</td>
          <td>opcional</td>
          <td>Matriz de cadenas o objetos de destino de notificación</td>
        </tr>
        <tr>
          <td><code translate="No">processing_regions</code></td>
          <td>formación</td>
          <td>requerido</td>
          <td>Regiones de procesamiento para el grupo redundante. Esto determinará qué regiones de AWS generarán los manifiestos. Recomendado, esto coincide con storage_regions y las regiones en las que se crean los trabajos en vivo.</td>
        </tr>
        <tr>
          <td><code translate="No">storage_regions</code></td>
          <td>formación</td>
          <td>requerido</td>
          <td>Las listas de reproducción y los fragmentos de medios de las regiones de almacenamiento se cargarán en S3. Se recomienda que coincida con Processing_regions y las regiones en las que se crean los trabajos en vivo.</td>
        </tr>
        <tr>
          <td><code translate="No">videocloud</code></td>
          <td>objeto</td>
          <td>opcional</td>
          <td>Los clientes de Video Cloud tienen la opción de crear un video para usar en la transmisión en vivo.</td>
        </tr>
      </tbody>
    </table>
    
    <p>La respuesta se verá así:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "id": "481ff4cf0bf74956bc2ec6e126588080",
      "processing_regions": [
          {
              "region": "us-west-2",
              "probability": 1
          }
      ],
      "storage_regions": [
          "us-west-2",
          "us-east-1"
      ],
      "jobs": [],
      "state": "standby",
      "label": "Test RG",
      "live_dvr_sliding_window_duration": 1800,
      "status": {
          "us-west-2": null
      },
      "ad_insertion": true,
      "outputs": {
          "playback_url": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/playlist.m3u8",
          "playback_url_dvr": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/playlist_dvr.m3u8",
          "ssai_playback_urls": {
              "26f8470f61374e608e27af9c1b3f7ff0": {
                  "playback_url": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/26f8470f61374e608e27af9c1b3f7ff0/playlist_ssaiM.m3u8",
                  "playback_url_dvr": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/26f8470f61374e608e27af9c1b3f7ff0/playlist_dvr_ssaiM.m3u8",
                  "description": "House Ads - 864b84f712ae40bca1510a8052b34312",
                  "type": "ads"
              }
      }
    }</code></pre>
    </section>
    <section class="bcls-section">
      <h2 id="get_redundant_group">Obtén grupos redundantes</h2>
      <p>Puede obtener todos los grupos redundantes enviando un <code translate="No">GET</code> solicitud de:</p>
      <pre><code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups</code></pre>
      <p>Puede filtrar la respuesta utilizando el <code translate="No">state</code> param. Los valores permitidos son:</p>
      <ul>
        <li><code translate="No">cancelled</code></li>
        <li><code translate="No">cancelling</code></li>
        <li><code translate="No">deleting</code></li>
        <li><code translate="No">disconnected</code></li>
        <li><code translate="No">failed</code></li>
        <li><code translate="No">finished</code></li>
        <li><code translate="No">finishing</code></li>
        <li><code translate="No">processing</code></li>
        <li><code translate="No">standby</code></li>
        <li><code translate="No">waiting</code></li>
      </ul>
      <p>También hay una <code translate="No">page_size</code> parámetro que se puede establecer en un número entero hasta 1000. El valor por defecto <code translate="No">page_size</code> es 10.</p>
      <p>La respuesta se verá así:</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "redundant_groups": [
    {
      "id": "91c268a6ec5240d79a6004f4ccf0dc6f",
      "account_id": "a95ac581551b4478b27910e5675db1f8",
      "user_id": "c2691d4d039040be96c190a949d754a7",
      "processing_regions": [
        {
          "region": "us-west-2",
          "probability": 1
        }
      ],
      "storage_regions": [
        "us-west-2",
        "us-east-1"
      ],
      "jobs": [],
      "state": "standby",
      "created_at": 1594316624287,
      "updated_at": 1594316624287,
      "label": "Test Redundant Group",
      "live_dvr_sliding_window_duration": 86400,
      "status": {
        "us-west-2": null
      },
      "outputs": {
        "playback_url": "https://bcovlive-a.akamaihd.net/r91c268a6ec5240d79a6004f4ccf0dc6f/us-west-2/NA/playlist.m3u8",
        "playback_url_dvr": "https://bcovlive-a.akamaihd.net/r91c268a6ec5240d79a6004f4ccf0dc6f/us-west-2/NA/playlist_dvr.m3u8"
      }
    },
    {
      "id": "279ac36e4b4d48a3abbd3e1f98cd57aa",
      "account_id": "a95ac581551b4478b27910e5675db1f8",
      "user_id": "c2691d4d039040be96c190a949d754a7",
      "processing_regions": [
        {
          "region": "us-west-2",
          "probability": 1
        }
      ],
      "storage_regions": [
        "us-west-2",
        "us-east-1"
      ],
      "jobs": [],
      "state": "standby",
      "created_at": 1594323207015,
      "updated_at": 1594323207015,
      "label": "Test Redundant Group2",
      "live_dvr_sliding_window_duration": 86400,
      "status": {
        "us-west-2": null
      },
      "outputs": {
        "playback_url": "https://bcovlive-a.akamaihd.net/r279ac36e4b4d48a3abbd3e1f98cd57aa/us-west-2/NA/playlist.m3u8",
        "playback_url_dvr": "https://bcovlive-a.akamaihd.net/r279ac36e4b4d48a3abbd3e1f98cd57aa/us-west-2/NA/playlist_dvr.m3u8"
      }
    }
  ]
}</code></pre>
    </section>
    <section class="bcls-section">
    <h2 id="Add_live_jobs_to_the_redundant_group">Agregar trabajos en vivo al grupo redundante</h2>
    
    <p>Una vez que haya creado un grupo redundante, puede agregarle trabajos enviando un <code translate="No">POST</code> solicitud de:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}/jobs</code></pre>
    
    <p>Los ID del trabajo en vivo se especifican en el cuerpo de la solicitud de esta manera:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">[
      {
        "job_id": "0b76bc73f92f46dc917bbe5061c0c633"
      },
      {
        "job_id": "0ae5a4a71dc54b3181af0f98ee407c27"
      }
    ]</code></pre>
    
    <p>Hay un par de propiedades opcionales adicionales para los objetos de trabajo; la siguiente tabla muestra todos los campos:</p>
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">Agregar campos de solicitud de trabajos en vivo</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>Campo</th>
          <th>Tipo</th>
          <th>¿Requerido?</th>
          <th>Descripción</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">job_id</code></td>
          <td>cuerda</td>
          <td>requerido</td>
          <td>ID del trabajo para agregar al grupo. Si ninguno <code translate="No">playlist</code> o <code translate="No">streams</code> están especificados, todos <code translate="No">outputs</code> se utilizará.</td>
        </tr>
        <tr>
          <td><code translate="No">playlist</code></td>
          <td>cuerda</td>
          <td>opcional</td>
          <td>Etiqueta de la lista de reproducción que se utilizará como salidas de la transmisión. Si <code translate="No">playlist</code> se define, <code translate="No">streams</code> <strong>debe</strong> ser <em>indefinido</em>.</td>
        </tr>
        <tr>
          <td><code translate="No">streams</code></td>
          <td>formación</td>
          <td>opcional</td>
          <td>Lista de etiquetas de transmisión que se utilizarán como salidas de la transmisión. Si <code translate="No">streams</code> se define, <code translate="No">playlist</code> <strong>debe</strong> ser <em>indefinido</em>.</td>
        </tr>
      </tbody>
    </table>
    
    <p>La respuesta exitosa para esta solicitud solo devolverá el ID de grupo redundante.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Get_Redundant_Group_Status">Obtener estado de grupo redundante</h2>
    
    <p>Puede obtener el estado de un grupo redundante enviando un <code translate="No">GET</code> solicitud de:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}</code></pre>
    
    <p>La respuesta tendrá el siguiente aspecto:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "id": "481ff4cf0bf74956bc2ec6e126588080",
      "processing_regions": [
          {
              "region": "us-west-2",
              "probability": 1
          }
      ],
      "storage_regions": [
          "us-west-2",
          "us-east-1"
      ],
      "jobs": [
          {
              "job_id": "0b76bc73f92f46dc917bbe5061c0c633",
              "streams": [
                  "hls720p",
                  "hls540p",
                  "hls360p"
              ],
              "state": "processing"
          },
          {
              "job_id": "0ae5a4a71dc54b3181af0f98ee407c27",
              "streams": [
                  "hls720p",
                  "hls540p",
                  "hls360p"
              ],
              "state": "processing"
          }
      ],
      "state": "processing",
      "created_at": 1568057414849,
      "updated_at": 1568059153017,
      "label": "Test RG",
      "live_dvr_sliding_window_duration": 1800,
      "status": {
          "us-west-2": {
              "SwitchDrift": 0,
              "Ended": false,
              "OnAir": "0b76bc73f92f46dc917bbe5061c0c633",
              "Mode": "auto",
              "InManifest": true,
              "MediaSequence": 10,
              "Healthiness": 0,
              "Duration": 4,
              "DiscontinuitySequence": 1,
              "SourceChunk": {
                  "MediaSequence": 3639,
                  "Duration": 4,
                  "DiscontinuitySequence": 0,
                  "ProgramDateTime": "2019-09-09T19:59:36Z",
                  "LiveJobID": "0b76bc73f92f46dc917bbe5061c0c633"
              },
              "UpdatedAt": "2019-09-09T19:59:46Z",
              "ProgramDateTime": "2019-09-09T19:59:36Z"
          }
      },
      "ad_insertion": true,
      "outputs": {
          "playback_url": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/playlist.m3u8",
          "playback_url_dvr": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/playlist_dvr.m3u8",
          "ssai_playback_urls": {
              "26f8470f61374e608e27af9c1b3f7ff0": {
                  "playback_url": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/26f8470f61374e608e27af9c1b3f7ff0/playlist_ssaiM.m3u8",
                  "playback_url_dvr": "https://playback-qa.a-live.io/r481ff4cf0bf74956bc2ec6e126588080/us-west-2/NA/26f8470f61374e608e27af9c1b3f7ff0/playlist_dvr_ssaiM.m3u8",
                  "description": "House Ads - 864b84f712ae40bca1510a8052b34312",
                  "type": "ads"
              }
          }
      }
    }</code></pre>
    
    <p>Cada región de procesamiento en el grupo redundante tendrá su propia <code translate="No">status</code> objeto, codificado por región. Puedes ver en este ejemplo que en el <code translate="No">us_west_2</code> región de procesamiento, la <code translate="No">on_air</code> trabajo es <code translate="No">0b76bc73f92f46dc917bbe5061c0c633</code>.</p>
    
    <p>Como nota al margen, los <code translate="No">probability</code> asociados con la región de procesamiento siempre lo estarán <code translate="No">1</code>, pero se incluirán en el modelo de datos para el futuro. mejoras que permitirán varias regiones de procesamiento con probabilidades entre 0 y 1, que representan el porcentaje aproximado de tráfico de reproducción que utilizará esa región.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="add_cuepoints">Agregar puntos de referencia manualmente</h2>
    
    <p>Agregar puntos de referencia manualmente a una transmisión en vivo con redundancia es muy similar a agregar puntos de referencia a una transmisión en vivo normal. Para hacer esto para un grupo redundante, haga un <code translate="No">POST</code> solicitud de:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}/cuepoint</code></pre>
    
    <p>Incluya un cuerpo de solicitud como el siguiente:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "ad_server_data": {
        "subject": "wildlife"
      },
      "duration": 30,
      "timecode": "09:23:18:05"
    }</code></pre>
    
    <p>Si omite el <code translate="No">timecode</code> campo, el punto de referencia se insertará inmediatamente.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Force_a_Job_failover">Forzar una conmutación por error de trabajo</h2>
    
    <p>La conmutación por error será administrada automáticamente por el sistema Brightcove Live y no debería requerir ninguna intervención de su parte. Sin embargo, si por alguna razón desea forzar la conmutación por error a otro trabajo, la forma más sencilla de hacerlo es simplemente detener el codificador del <code translate="No">on_air</code> trabajo.</p>
    
    <p>También puede forzar la conmutación por error utilizando la API haciendo un <code translate="No">PUT</code> solicitud de:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}/switch</code></pre>
    
    <p>El cuerpo de la solicitud tiene este aspecto:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "mode": "manual",
      "on_air": "0ae5a4a71dc54b3181af0f98ee407c27"
    }</code></pre>
    
    <p>Aquí, <code translate="No">mode</code> será cualquiera <code translate="No">manual</code> o <code translate="No">auto</code> (el predeterminado), y el <code translate="No">on_air</code> tendrá un valor de uno de los <strong>secundario</strong> ID de trabajo.</p>
    
    <p>Nota: Una vez en <code translate="No">manual</code> modo, la conmutación por error automática del trabajo <strong>no</strong> ocurrir. Tú <strong>deber</strong> volver a establecer el modo en <code translate="No">auto</code> para que se reanude la conmutación por error automática. Puede cambiar el trabajo en el aire sin cambiar a manual omitiendo el modo en el cuerpo y agregando el parámetro de consulta de fuerza <code translate="No">?force=true</code> a su solicitud. Esto obligará al servicio a cambiar de trabajo, pero puede volver a hacerlo en cualquier momento si detecta problemas.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Ending_a_redundant_stream">Finalizar una transmisión redundante</h2>
    
    <p>Hay dos formas de finalizar la transmisión redundante. Por diseño, los grupos redundantes están implícitamente <a href="/live-api/guides/live-api-static-entry-points.html">SEP</a> arroyos. Puede poner un grupo redundante en <code translate="No">STANDBY</code> modo eliminando todos los trabajos del grupo redundante.</p>
    
    <p>Para hacer esto usando un <code translate="No">DELETE</code> solicitud de:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}/jobs/{job_id}</code></pre>
    
    <p>para cada trabajo que desee eliminar. Tenga en cuenta que para eliminar el trabajo que se encuentra actualmente <code translate="No">on_air</code>, tendrá que agregar el parámetro de <code translate="No">?force-true</code> consulta.</p>
    
    <p>La segunda forma de finalizar la transmisión es eliminar el grupo redundante por completo enviando un <code translate="No">DELETE</code> solicitud de:</p>
    
    <pre>
    <code class="language-http" translate="No">https://api.bcovlive.io/v1/redundantgroups/{redundant_group_id}</code></pre>
    </section>
    <section class="bcls-section">
      <h2 id="limitations">Limitaciones</h2>
      <ul>
        <li>Redundancia en vivo <strong>no puedo</strong> utilizarse con transmisiones en vivo protegidas por DRM.</li>
      </ul>
    </section>
        </article>
    
 