---
title: 'Muestra de API en vivo: Crear un trabajo en vivo'
parent: Code Samples 
grandparent: Live API
---
 <h1>Esta página se ha movido; se te dirigirá a la <a href="https://apis.support.brightcove.com/live-api/code-samples/live-api-sample-create-live-job.html">nueva ubicación</a> en 3 segundos. ¡Actualiza tus marcadores!</h1>
<script type="text/javascript">
var t = setTimeout (function () { window.location.href = 'https://apis.support.brightcove.com/live-api/code-samples/live-api-sample-create-live-job.html'; }, 3000);
</script>
<article class="bcls-article">
  <h1>Muestra de API en vivo: Crear un trabajo en vivo</h1>
  <summary>En esta muestra, aprenderá a crear un trabajo en vivo simple.</summary>


<section class="bcls-section">
<h2 id="Introduction">Introducción</h2>

<p>Esta muestra crea un trabajo en vivo simple con tres representaciones de salida: 1080p, 720p y 480p.</p>

<p>Porque el <span translate="No">API en vivo</span> no está habilitado para CORS y se debe acceder a él desde una aplicación del lado del servidor, la solicitud de API se envía a través de un proxy simple escrito en PHP. Puede reproducir esto en cualquier lenguaje del lado del servidor; todo lo que hace es recopilar los parámetros de solicitud enviados por JavaScript, envía la solicitud a la API y devuelve la respuesta a JavaScript. Todo el código se puede encontrar en el <a href="#code">sección de código a continuación</a>.</p>
</section>

<section class="bcls-section">
<h2 id="create_live_job_app">Crear aplicación de trabajo en vivo</h2>
Encuentre todo el código asociado con esta muestra en este <a href="https://github.com/BrightcoveLearning/18519-live-api-sample-create-live-job">Repositorio de GitHub</a>.

<p data-height="1400" data-theme-id="dark" data-slug-hash="ZoYoVY" data-default-tab="result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="Live API Sample: Create a Live Job" class="codepen">Ver la pluma <a href="https://codepen.io/team/rcrooks1969/pen/ZoYoVY/">Muestra de API en vivo: Cree un trabajo en vivo</a> de Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969">@rcrooks1969</a>) en <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script></section>

<section class="bcls-section">
<h2 id="Using_the_CodePen" class="bcls-expander-head">Usando el CodePen</h2>

<div class="bcls-expander-content">
<p>A continuación, se incluyen algunos consejos para utilizar eficazmente el CodePen anterior:</p>

<ul>
	<li>Cambie la visualización real del reproductor haciendo clic en el <strong>Resultado</strong> botón.</li>
	<li>Haga clic en el <strong>HTML / CSS / JS</strong> botones para mostrar UNO de los tipos de código.</li>
	<li>Hacer clic <strong>Editar en CodePen</strong> en la esquina superior derecha para bifurcar este CodePen en su propia cuenta.</li>
	<li>Encuentre todo el código asociado con esta muestra en este <a href="https://github.com/BrightcoveLearning/18519-live-api-sample-create-live-job">Repositorio de GitHub</a>.</li>
</ul>
</div>
</section>

<section class="bcls-section">
<h2 id="code">Código de proxy</h2>

<p>Además del código que se encuentra en CodePen (y el repositorio de GitHub asociado), esta muestra requiere un proxy para realizar la solicitud de API y devolver la respuesta a la aplicación. Para esta aplicación usamos PHP y el código se muestra a continuación. Puede usar cualquier lenguaje del lado del servidor para construir el proxy.</p>

<pre class="line-numbers">
<code class="language-php">&lt;? php / ** * live-proxy.php - proxy para Brightcove Live APIs * realiza la solicitud y devuelve la respuesta * Accediendo: * (tenga en cuenta que debe * siempre * acceder al proxy a través de HTTPS) * Método: POST * * @post {string} url - la URL de la solicitud API * @post {string} [requestType=Get] - Método HTTP para la solicitud * @post {string} [requestBody] - Datos JSON que se enviarán con solicitudes de escritura * @post {string} ApiKey - Live Clave de API * * @returns {string} $response - Respuesta JSON recibida de la API *///Enablement CORS y otros encabezados («Access-Control-Allow-Origin: *»); encabezado («Content-Type: application/json»); encabezado («X-Content-Type-Options: nosniff»); encabezado («X-XSS) -Protection»); $requestData = json_decode (file_get_contents ('php: //input'));//configura la llamada a la API//get api key $apikey = $requestData-&gt;ApiKey;//obtener el tipo de solicitud o por defecto GET if ($requestData-&gt;requestType) { $method = $requestData-&gt;requestType; } else { $method = "GET"; }//más comprobaciones de seguridad $needle = '.io'; $endapi = strpos ($requestData-&gt;URL, $needle) + 3; $nextChar = substr ($requestData-&gt;URL, $endapi, 1); if (strpos ($requestData-&gt;URL, 'api.bcovlive.io') == false) { exit('{"ERROR":"Only requests to Brightcove Live APIs are accepted by this proxy"}');} else if ($nextChar! == '/'  $ nextChar! == '? ') { exit('{"ERROR": "There was a problem with your API request - please check the URL"}');}//obtener la URL y la información de autorización de los datos del formulario $request = $requestData-&gt;URL; //envía la solicitud http si ($requestData-&gt;requestBody) { $ch = curl_init($request); curl_setopt_array($ch, array( CURLOPT_CUSTOMREQUEST =&gt; $method, CURLOPT_RETURNTRANSFER =&gt; TRUE, CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_HTTPHEADER =&gt; array( 'Content-type: application/json', "X-API-KEY: {$apikey}«,), CURLOPT_POSTFIELDS =&gt; $requestData-&gt;requestBody)); $response = curl_exec ($ch); curl_close ($ch);} else { $ch = curl_init($request); curl_setopt_array($ch, array( CURLOPT_CUSTOMREQUEST =&gt; $method, CURLOPT_RETURNTRANSFER =&gt; TRUE, CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_HTTPHEADER =&gt; array( 'Content-type: application/json', "X-API-KEY: {$apikey}«,))); $response = curl_exec ($ch); curl_close ($ch);}//Comprueba si hay errores si ($respuesta === FALSE) { $logEntry = "\nError:\n". "\n".date("Y-m-d H:i:s")." UTC \n" .$response; $logFileLocation = "log.txt"; $fileHandle = fopen($logFileLocation, 'a') or die("-1"); fwrite($fileHandle, $logEntry); fclose($fileHandle); echo '{"ERROR": "There was a problem with your API call"}'+ die (curl_error ($ch));}//Decodifica la respuesta//$responseData = json_decode ($response, TRUE);//devolver el respuesta a la persona que llama AJAX $responseDecoded = json_decode ($response);//if (! isset ($responseDecoded)) { // $response = '{null}';//} echo $response;? &gt; </code></pre>
</section>

<script src="//learning-services-media.brightcove.com/doc-assets/node/18519-live-api-sample-create-live-job/create-job.js">

</script>

</article>